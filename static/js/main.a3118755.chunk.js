(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{116:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(10),o=n.n(r);n(89),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(90);var i=n(14),l=n(163),u=n(166),s=n(165),d=n(23),f=n(175),T=n(164),m=c.a.memo((function(t){console.log("AddItemForm called");var e=Object(a.useState)(""),n=Object(i.a)(e,2),r=n[0],o=n[1],u=Object(a.useState)(null),s=Object(i.a)(u,2),d=s[0],m=s[1],b=function(){""!==r.trim()?(t.addItem(r),o("")):m("Title is required")};return c.a.createElement("div",null,c.a.createElement(f.a,{variant:"outlined",error:!!d,value:r,onChange:function(t){o(t.currentTarget.value)},onKeyPress:function(t){null!==d&&m(null),"Enter"===t.key&&b()},label:"Title",helperText:d}),c.a.createElement(l.a,{color:"primary",onClick:b},c.a.createElement(T.a,null)))})),b=c.a.memo((function(t){console.log("editablespan called");var e=Object(a.useState)(!1),n=Object(i.a)(e,2),r=n[0],o=n[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),s=u[0],d=u[1];return r?c.a.createElement(f.a,{variant:"outlined",onChange:function(t){return d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),t.onChange(s)},value:s}):c.a.createElement("span",{onDoubleClick:function(){o(!0),d(t.title)}},t.title)})),O=n(18),E=n(15),k=n(74),v=n.n(k).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"fc086433-a3b2-4e29-b729-0bb49b9ccb7d"}}),g=function(){return v.get("todo-lists")},j=function(t){return v.post("todo-lists",{title:t})},h=function(t){return v.delete("todo-lists/".concat(t))},S=function(t,e){return v.put("todo-lists/".concat(t),{title:e})},p=function(t){return v.get("todo-lists/".concat(t,"/tasks"))},I=function(t,e){return v.post("todo-lists/".concat(t,"/tasks"),{title:e})},C=function(t,e){return v.delete("todo-lists/".concat(t,"/tasks/").concat(e))},A=function(t,e,n){return v.put("todo-lists/".concat(n,"/tasks/").concat(t),{title:e})},y={status:"loading",error:null},D=function(t){return{type:"APP/SET-STATUS",status:t}},L=function(t){return{type:"APP/SET-ERROR",error:t}},w={},R=n(176),K=c.a.memo((function(t){var e=Object(a.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.changeTaskTitle,t.task.id,t.todolistId]);return c.a.createElement("div",{key:t.task.id,className:t.task.isDone?"is-done":""},c.a.createElement(R.a,{color:"secondary",onChange:function(e){var n=e.currentTarget.checked;t.changeTaskStatus(t.task.id,n,t.todolistId)},checked:t.task.isDone}),c.a.createElement(b,{title:t.task.title,onChange:e}),c.a.createElement(l.a,{onClick:function(){return t.removeTask(t.task.id,t.todolistId)}}," ",c.a.createElement(s.a,null)," "))})),N=c.a.memo((function(t){var e=Object(d.b)();Object(a.useEffect)((function(){var n;e((n=t.id,function(t){t(D("loading")),p(n).then((function(e){var a=function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(e.data.items,n);t(a),t(D("succeeded"))}))}))}),[]),console.log("Todolist called");var n=Object(a.useState)(""),r=Object(i.a)(n,2),o=(r[0],r[1],Object(a.useState)(null)),f=Object(i.a)(o,2),T=(f[0],f[1],Object(a.useCallback)((function(e){return t.addTask(e,t.id)}),[t.addTask,t.id])),O=Object(a.useCallback)((function(){return t.changeFilter("all",t.id)}),[]),E=Object(a.useCallback)((function(){return t.changeFilter("active",t.id)}),[]),k=Object(a.useCallback)((function(){return t.changeFilter("completed",t.id)}),[]),v=Object(a.useCallback)((function(e){return t.changeTodolistTitle(t.id,e)}),[t.id,t.changeTodolistTitle]),g=t.tasks;return"active"===t.filter&&(g=t.tasks.filter((function(t){return!1===t.isDone}))),"completed"===t.filter&&(g=t.tasks.filter((function(t){return!0===t.isDone}))),c.a.createElement("div",null,c.a.createElement("h3",null," ",c.a.createElement(b,{title:t.title,onChange:v}),c.a.createElement(l.a,{onClick:function(){return t.removeTodolist(t.id)}}," ",c.a.createElement(s.a,null)," ")),c.a.createElement(m,{addItem:T}),c.a.createElement("div",null,g.map((function(e){return c.a.createElement(K,{task:e,changeTaskStatus:t.changeTaskStatus,changeTaskTitle:t.changeTaskTitle,removeTask:t.removeTask,todolistId:t.id,key:e.id})}))),c.a.createElement("div",null,c.a.createElement(u.a,{variant:"all"===t.filter?"contained":"outlined",color:"default",onClick:O},"All "),c.a.createElement(u.a,{variant:"active"===t.filter?"contained":"outlined",color:"primary",onClick:E},"Active"),c.a.createElement(u.a,{variant:"completed"===t.filter?"contained":"outlined",color:"secondary",onClick:k},"Completed")))})),P=n(167),H=n(168),F=n(170),G=n(171),x=n(172),M=n(173),U=n(117),V=n(169),B=n(177),J=[],W=function(t){return function(e){e(D("loading")),j(t).then((function(t){if(0===t.data.resultCode){var n=t.data.data.item.title;e(function(t){return{type:"ADD-TODOLIST",title:t,todolistId:Object(B.a)()}}(n)),e(D("succeeded"))}else t.data.messages.length?e(L(t.data.messages[0])):e(L("Some error occurred")),e(D("failed"))}))}},q=n(179),Y=n(174);function $(t){return c.a.createElement(Y.a,Object.assign({elevation:6,variant:"filled"},t))}function z(){var t=c.a.useState(!0),e=Object(i.a)(t,2),n=(e[0],e[1]),a=Object(d.c)((function(t){return t.app.error})),r=Object(d.b)(),o=function(t,e){"clickaway"!==e&&(r(L(null)),n(!1))};return c.a.createElement(q.a,{open:null!==a,autoHideDuration:4e3,onClose:o},c.a.createElement($,{onClose:o,severity:"error"},a))}var Q=function(){var t=Object(d.c)((function(t){return t.todolists})),e=Object(d.c)((function(t){return t.tasks})),n=Object(d.b)();Object(a.useEffect)((function(){n((function(t){t(D("loading")),g().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data}),t(D("succeeded"))}))}))}),[n]);var r=Object(a.useCallback)((function(t){var e=function(t){return function(e){e(D("loading")),h(t).then((function(n){e(function(t){return{type:"REMOVE-TODOLIST",id:t}}(t)),e(D("succeeded"))}))}}(t);n(e)}),[n]),o=Object(a.useCallback)((function(t,e){var a,c,r=(a=t,c=e,function(t){t(D("loading")),S(a,c).then((function(e){t(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(a,c)),t(D("succeeded"))}))});n(r)}),[n]),i=Object(a.useCallback)((function(t,e){var a=function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filter:t,id:e}}(t,e);n(a)}),[n]),s=Object(a.useCallback)((function(t,e){var a=function(t,e){return function(n){n(D("loading")),I(e,t).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item;n(function(t){return{type:"ADD-TASK",task:t}}(e)),n(D("succeeded"))}else t.data.messages.length?n(L(t.data.messages[0])):n(L("Some error occurred")),n(D("failed"))})).catch((function(t){n(L(t.message)),n(L("failed"))}))}}(t,e);n(a)}),[n]),f=Object(a.useCallback)((function(t,e){var a=function(t,e){return function(n){n(D("loading")),C(e,t).then((function(a){var c=function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(t,e);n(c),n(D("succeeded"))}))}}(t,e);n(a)}),[n]),T=Object(a.useCallback)((function(t,e,a){var c=function(t,e,n){return{type:"CHANGE-TASK-STATUS",taskId:t,todolistId:n,isDone:e}}(t,e,a);n(c)}),[n]),b=Object(a.useCallback)((function(t,e,a){var c=function(t,e,n){return function(a){a(D("loading")),A(t,e,n).then((function(c){var r=function(t,e,n){return{type:"CHANGE-TASK-TITLE",taskId:t,title:e,todolistId:n}}(t,e,n);a(r),a(D("succeeded"))}))}}(t,e,a);n(c)}),[n]),O=Object(a.useCallback)((function(t){var e=W(t);n(e)}),[n]),E=Object(d.c)((function(t){return t.app.status}));return c.a.createElement("div",{className:"App"},c.a.createElement(z,null),c.a.createElement(P.a,{position:"static"},c.a.createElement(H.a,null,c.a.createElement(l.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(V.a,null)),c.a.createElement(F.a,{variant:"h6"},"News"),c.a.createElement(u.a,{color:"inherit"},"Login"))),"loading"===E&&c.a.createElement(G.a,{color:"secondary"}),c.a.createElement(x.a,{fixed:!0},c.a.createElement(M.a,{container:!0,style:{padding:"20px"}},c.a.createElement(m,{addItem:O})),c.a.createElement(M.a,{container:!0,spacing:3,key:"tl"},t.map((function(t){var n=e[t.id];return c.a.createElement(M.a,{item:!0},c.a.createElement(U.a,{style:{padding:"10px"}},c.a.createElement(N,{key:t.id,id:t.id,title:t.title,tasks:n,removeTask:f,addTask:s,changeFilter:i,changeTaskStatus:T,filter:t.filter,removeTodolist:r,changeTaskTitle:b,changeTodolistTitle:o})))})),";")))},X=n(52),Z=n(75),_=Object(X.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":var n=Object(E.a)({},t),a=n[e.todolistId],c=a.filter((function(t){return t.id!==e.taskId}));return n[e.todolistId]=c,n;case"ADD-TASK":var r=Object(E.a)({},t),o=e.task,i=r[o.todoListId],l=[o].concat(Object(O.a)(i));return r[o.todoListId]=l,r;case"CHANGE-TASK-STATUS":var u=t[e.todolistId];return t[e.todolistId]=u.map((function(t){return t.id===e.taskId?Object(E.a)(Object(E.a)({},t),{},{isDone:e.isDone}):t})),Object(E.a)({},t);case"CHANGE-TASK-TITLE":var s=t[e.todolistId],d=s.map((function(t){return t.id===e.taskId?Object(E.a)(Object(E.a)({},t),{},{title:e.title}):t}));return t[e.todolistId]=d,Object(E.a)({},t);case"ADD-TODOLIST":var f=Object(E.a)({},t);return f[e.todolistId]=[],f;case"REMOVE-TODOLIST":var T=Object(E.a)({},t);return delete T[e.id],T;case"SET-TODOLISTS":var m=Object(E.a)({},t);return e.todolists.forEach((function(t){m[t.id]=[]})),m;case"SET-TASKS":var b=Object(E.a)({},t);return b[e.todolistId]=e.tasks,b;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":return[].concat(Object(O.a)(t),[{id:e.todolistId,title:e.title,filter:"all"}]);case"CHANGE-TODOLIST-TITLE":var n=t.find((function(t){return t.id===e.id}));return n&&(n.title=e.title),Object(O.a)(t);case"CHANGE-TODOLIST-FILTER":var a=t.find((function(t){return t.id===e.id}));return a&&(a.filter=e.filter),Object(O.a)(t);case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{filter:"all"})}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(E.a)(Object(E.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(E.a)(Object(E.a)({},t),{},{error:e.error});default:return t}}}),tt=Object(X.c)(_,Object(X.a)(Z.a));window.store=tt,o.a.render(c.a.createElement(d.a,{store:tt},c.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},84:function(t,e,n){t.exports=n(116)},89:function(t,e,n){},90:function(t,e,n){}},[[84,1,2]]]);
//# sourceMappingURL=main.a3118755.chunk.js.map